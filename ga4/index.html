
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://decodedata.io/ga4/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="quickstart/">
      
      
      <link rel="icon" href="../assets/logos/Decode Data Logo Transparent 130x130.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>GA4 Overview - DECODE DATA</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-B2XB0TB3ZR"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-B2XB0TB3ZR",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-B2XB0TB3ZR",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="blue-grey">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#google-analytics-4" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
<body>
The <b>Google Analytics 4 Decoder</b> is currently in pre-launch. Check out the overview <a style="color:white; font-weight: bold; text-decoration: underline;" href="/ga4">here</a> and apply for access <a style="color:white; font-weight: bold; text-decoration: underline;" href="https://forms.gle/qfFSthXr6d4gnD9dA">here</a>.
</body>

          </div>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="DECODE DATA" class="md-header__button md-logo" aria-label="DECODE DATA" data-md-component="logo">
      
  <img src="../assets/logos/Decode Data Logo 180x180.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DECODE DATA
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              GA4 Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="blue-grey"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Overview

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
    
  
  Decoders

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../bigquery/conventions/" class="md-tabs__link">
          
  
    
  
  Reference

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../terms/" class="md-tabs__link">
          
  
    
  
  Legal

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="DECODE DATA" class="md-nav__button md-logo" aria-label="DECODE DATA" data-md-component="logo">
      
  <img src="../assets/logos/Decode Data Logo 180x180.png" alt="logo">

    </a>
    DECODE DATA
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Decoders
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Decoders
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="./" class="md-nav__link md-nav__link--active">
              
  
  <span class="md-ellipsis">
    Google Analytics 4
  </span>
  

            </a>
            
              
              <label class="md-nav__link md-nav__link--active" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Google Analytics 4
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="events/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Events
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2_1_3" id="__nav_2_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1_3">
            <span class="md-nav__icon md-icon"></span>
            Events
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="events/event_names/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Names
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="events/event_parameters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parameters
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="sessions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sessions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="advanced/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bigquery/conventions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conventions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Legal
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Legal
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../terms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Terms & Conditions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../privacy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Privacy Policy
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    <span class="md-ellipsis">
      Motivation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#objective" class="md-nav__link">
    <span class="md-ellipsis">
      Objective
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#access" class="md-nav__link">
    <span class="md-ellipsis">
      Access
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quickstart" class="md-nav__link">
    <span class="md-ellipsis">
      Quickstart
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Output Resources
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Output Resources">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#output-tables" class="md-nav__link">
    <span class="md-ellipsis">
      Output Tables
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automation" class="md-nav__link">
    <span class="md-ellipsis">
      Automation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Automation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#incremental-refresh" class="md-nav__link">
    <span class="md-ellipsis">
      Incremental Refresh
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-refresh" class="md-nav__link">
    <span class="md-ellipsis">
      Full Refresh
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Default mode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compute-estimate" class="md-nav__link">
    <span class="md-ellipsis">
      Compute Estimate
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="google-analytics-4">Google Analytics 4</h1>
<h2 id="motivation">Motivation</h2>
<p>The Google Analytics 4 export to BigQuery has a complex structure which is extremely difficult to query in SQL, making analytics tasks time-consuming and SQL code extremely long, difficult to understand and error-prone.</p>
<h2 id="objective">Objective</h2>
<p>The Google Analytics 4 (GA4) decoder simplifies and augments the GA4 BigQuery export, making subsequent data operations simpler and quicker.</p>
<p>It enables automatic pre-modelling of the GA4 BigQuery <code>events_YYYYMMDD</code> export, providing flattened, date-partitioned <code>events</code> and <code>sessions</code> tables containing all standard and observed <code>event_params</code> and <code>user_properties</code>.  It also provides mechanisms to detect new <code>event_params</code> and <code>user_properties</code> values and to incrementally update the schema based on inbound data detection.</p>
<p>It can be installed using a one-line command in the BigQuery console by permitted users on registered datasets, and has no dependencies on any external platforms or API calls.</p>
<h2 id="access">Access</h2>
<p>The <a href="ga4/index.md">Google Analytics 4 Decoder</a> is in pre-launch with selected agencies and enterprises. Apply for access <a href="https://forms.gle/qfFSthXr6d4gnD9dA">here</a>.</p>
<h2 id="quickstart">Quickstart</h2>
<p>Follow <a href="quickstart/">these</a> instructions to get started as quickly as possible.</p>
<h2 id="installation">Installation</h2>
<p>The GA4 decoder can be deployed in the same dataset as the inbound GA4 dataset (<code>ga4_dataset_id</code>), or a different dataset if desired.  Note that the installation function needs to be called in the same region in which the GA4 dataset is located (in the examples below, for the <code>us</code> multi-region).</p>
<h3 id="basic-installation">Basic Installation</h3>
<p>In the following installation examples, the <code>event_options</code> <code>JSON</code> variable is <code>NULL</code>, which means that default installation options are used. The <code>event_options</code> is the mechanism via which custom installation configurations are set.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Basic installation in the GA4 dataset</label><label for="__tabbed_1_2">Basic installation in a different dataset</label><label for="__tabbed_1_3">Concise syntax</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">DECLARE</span><span class="w"> </span><span class="n">ga4_dataset_id</span><span class="p">,</span><span class="w"> </span><span class="n">decoder_dataset_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">;</span>
<span class="w">  </span><span class="k">DECLARE</span><span class="w"> </span><span class="n">event_options</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="s1">&#39;{}&#39;</span><span class="p">;</span>

<span class="w">  </span><span class="k">SET</span><span class="w"> </span><span class="n">ga4_dataset_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;project_id.analytics_##########&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="k">SET</span><span class="w"> </span><span class="n">decoder_dataset_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ga4_dataset_id</span><span class="p">;</span>

<span class="w">  </span><span class="k">CALL</span><span class="w"> </span><span class="n">decodedata</span><span class="p">.</span><span class="n">us</span><span class="p">.</span><span class="n">install_ga4_decoder</span><span class="p">(</span><span class="n">ga4_dataset_id</span><span class="p">,</span><span class="w"> </span><span class="n">decoder_dataset_id</span><span class="p">,</span><span class="w"> </span><span class="n">event_options</span><span class="p">);</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="k">DECLARE</span><span class="w"> </span><span class="n">ga4_dataset_id</span><span class="p">,</span><span class="w"> </span><span class="n">decoder_dataset_id</span><span class="w"> </span><span class="n">STRING</span><span class="p">;</span>
<span class="w">  </span><span class="k">DECLARE</span><span class="w"> </span><span class="n">event_options</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="s1">&#39;{}&#39;</span><span class="p">;</span>

<span class="w">  </span><span class="k">SET</span><span class="w"> </span><span class="n">ga4_dataset_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;project_id.analytics_##########&#39;</span><span class="p">;</span>
<span class="w">  </span><span class="k">SET</span><span class="w"> </span><span class="n">decoder_dataset_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;project_id.decoder_dataset_name&#39;</span><span class="p">;</span>

<span class="w">  </span><span class="k">CALL</span><span class="w"> </span><span class="n">decodedata</span><span class="p">.</span><span class="n">us</span><span class="p">.</span><span class="n">install_ga4_decoder</span><span class="p">(</span><span class="n">ga4_dataset_id</span><span class="p">,</span><span class="w"> </span><span class="n">decoder_dataset_id</span><span class="p">,</span><span class="w"> </span><span class="n">event_options</span><span class="p">);</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">CALL</span><span class="w"> </span><span class="n">decodedata</span><span class="p">.</span><span class="n">us</span><span class="p">.</span><span class="n">install_ga4_decoder</span><span class="p">(</span><span class="s1">&#39;project_id.analytics_##########&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;project_id.decoder_dataset_name&#39;</span><span class="w"> </span><span class="k">NULL</span><span class="p">);</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="output-resources">Output Resources</h2>
<h3 id="output-tables">Output Tables</h3>
<p>Following installation, these output tables are built in the <code>decoder_dataset_id</code> dataset:</p>
<table>
<thead>
<tr>
<th>Resource Name</th>
<th>Resource Type</th>
<th>Partitioning Column</th>
<th>Row Granularity</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>events</code></strong></td>
<td><code>TABLE</code></td>
<td><code>event_date</code></td>
<td>One row per event</td>
</tr>
<tr>
<td><strong><code>sessions</code></strong></td>
<td><code>TABLE</code></td>
<td><code>event_date</code></td>
<td>One row per session</td>
</tr>
</tbody>
</table>
<p>Detailed information regarding the transformation, augmentation and schema is available in the <a href="events/">events</a> and <a href="sessions/">sessions</a> docs.</p>
<p>These date-partitioned tables will be built from the latest data upon installation.</p>
<h3 id="functions">Functions</h3>
<p>Following installation, these execution functions are also deployed in the <code>decoder_dataset_id</code> dataset:</p>
<table>
<thead>
<tr>
<th>Resource Name <div style="width:120px"></div></th>
<th>Resource Type</th>
<th>Arguments <div style="width:180px"></div></th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><code>INSTALL_DECODER</code></strong></td>
<td><code>PROCEDURE</code></td>
<td>none</td>
<td>Reinstall decoder with original deployment options</td>
</tr>
<tr>
<td><strong><code>RUN_DECODER</code></strong></td>
<td><code>PROCEDURE</code></td>
<td><code>execution_options JSON</code></td>
<td>Execute the decoder and refresh output tables</td>
</tr>
</tbody>
</table>
<p>The <code>decoder_dataset_id.INSTALL_DECODER()</code> function is executed to reinstall the decoder with the original installation configuration.  It also rebuilds output tables with the full historic data.</p>
<p>The <code>decoder_dataset_id.RUN_DECODER(execution_options)</code> function is executed to refresh output tables with the transformed latest arriving data.</p>
<h2 id="automation">Automation</h2>
<p>The <code>RUN_DECODER</code> function has two different execution modes: <code>incremental</code> and <code>full</code>. Execution mode is set using the <code>execution_options</code> <code>JSON</code> arguments.</p>
<p>In order to efficiently automate the decoder, a simple BigQuery scheduled query can be used to call the <code>RUN_DECODER</code> function periodically (typically every hour).  Since it is querying metadata to identify newly arriving date partitions, the underlying data is never queried, meaning that the compute required for the automation is predictable and low (see the Compute Estimate section).</p>
<h3 id="incremental-refresh">Incremental Refresh</h3>
<p>The <code>incremental</code> execution mode is the optimal mode to keep the output tables up-to-date in a cost-efficient manner. It compares inbound and outbound table metadata to determine when new date partitions arrive, and runs on those partitions only (plus an additional <code>n</code> days, due to late arriving data in the GA4 export).  Note that since the source data can change up to 72 hours after the table is created, it is recommended to set this to 4 days.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Incremental refresh</label><label for="__tabbed_2_2">Concise syntax</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">DECLARE</span><span class="w"> </span><span class="n">execution_options</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="s1">&#39;{&quot;mode&quot;: &quot;incremental&quot;, &quot;date_partitions_to_replace&quot;: 4}&#39;</span><span class="p">;</span>

<span class="k">CALL</span><span class="w"> </span><span class="o">`</span><span class="n">decoder_dataset_id</span><span class="p">.</span><span class="n">us</span><span class="p">.</span><span class="n">RUN_DECODER</span><span class="o">`</span><span class="p">(</span><span class="n">execution_options</span><span class="p">);</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">CALL</span><span class="w"> </span><span class="o">`</span><span class="n">decoder_dataset_id</span><span class="p">.</span><span class="n">us</span><span class="p">.</span><span class="n">RUN_DECODER</span><span class="o">`</span><span class="p">(</span><span class="n">JSON</span><span class="w"> </span><span class="s1">&#39;{&quot;mode&quot;: &quot;incremental&quot;, &quot;date_partitions_to_replace&quot;: 4}&#39;</span><span class="p">);</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="full-refresh">Full Refresh</h3>
<p>To execute a full refresh of output tables between the first observed source shard data and the <code>CURRENT_DATE</code>, use the following <code>execution_options</code>:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Full refresh</label><label for="__tabbed_3_2">Concise syntax</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">DECLARE</span><span class="w"> </span><span class="n">execution_options</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="s1">&#39;{&quot;mode&quot;: &quot;full&quot;}&#39;</span><span class="p">;</span>

<span class="k">CALL</span><span class="w"> </span><span class="o">`</span><span class="n">decoder_dataset_id</span><span class="p">.</span><span class="n">us</span><span class="p">.</span><span class="n">RUN_DECODER</span><span class="o">`</span><span class="p">(</span><span class="n">execution_options</span><span class="p">);</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">CALL</span><span class="w"> </span><span class="o">`</span><span class="n">decoder_dataset_id</span><span class="p">.</span><span class="n">us</span><span class="p">.</span><span class="n">RUN_DECODER</span><span class="o">`</span><span class="p">(</span><span class="n">JSON</span><span class="w"> </span><span class="s1">&#39;{&quot;mode&quot;: &quot;full&quot;}&#39;</span><span class="p">);</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="default-mode">Default mode</h3>
<p>If the <code>execution_options</code> <code>JSON</code> argument is <code>NULL</code>, the execution defaults to <code>mode = incremental</code> and <code>date_partitions_to_replace = 4</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Default incremental cxecution</label><label for="__tabbed_4_2">Concise syntax</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">DECLARE</span><span class="w"> </span><span class="n">execution_options</span><span class="w"> </span><span class="n">JSON</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span>

<span class="k">CALL</span><span class="w"> </span><span class="o">`</span><span class="n">decoder_dataset_id</span><span class="p">.</span><span class="n">us</span><span class="p">.</span><span class="n">RUN_DECODER</span><span class="o">`</span><span class="p">(</span><span class="n">execution_options</span><span class="p">);</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">CALL</span><span class="w"> </span><span class="o">`</span><span class="n">decoder_dataset_id</span><span class="p">.</span><span class="n">us</span><span class="p">.</span><span class="n">RUN_DECODER</span><span class="o">`</span><span class="p">(</span><span class="k">NULL</span><span class="p">);</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="compute-estimate">Compute Estimate</h2>
<p>The compute automation component to run the GA4 decoder hourly is approximately $0.135 per property per month. This consumption will not increase over time, regardless of inbound data volumes.</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Logic</th>
<th>Value</th>
<th>Unit</th>
</tr>
</thead>
<tbody>
<tr>
<td>Execution Processing</td>
<td>3 x 10MB Metadata Queries</td>
<td>30</td>
<td>MB</td>
</tr>
<tr>
<td>Monthly Executions</td>
<td>30 days * 24hrs</td>
<td>720</td>
<td>Executions</td>
</tr>
<tr>
<td>Monthly Compute</td>
<td>720 Executions * 30MB</td>
<td>21.6</td>
<td>GB</td>
</tr>
<tr>
<td>Compute Unit Cost</td>
<td>1TB On-Demand Compute = $6.25</td>
<td>0.00625</td>
<td>$/GB</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td><strong>Total Automation<br>Monthly Compute</strong></td>
<td><strong>21.6GB * $0.00625</strong></td>
<td><strong>0.135</strong></td>
<td><strong>$</strong></td>
</tr>
</tbody>
</table>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Overview">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Overview
              </div>
            </div>
          </a>
        
        
          
          <a href="quickstart/" class="md-footer__link md-footer__link--next" aria-label="Next: Quickstart">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Quickstart
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 DECODE DATA LTD (15503524), UK <br><a href="#__consent">Change cookie settings</a> | <a href="/privacy">Privacy Policy</a> | <a href="/terms">Terms & Conditions</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  




  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.footer", "navigation.indexes", "navigation.tabs", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>